<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ö–æ—Ä–∑–∏–Ω–∞</title>
  <style>
    :root {
      --bg:#0f1220; --card:#171a2a; --text:#e8ebff; --muted:#9aa3c7;
      --accent:#6ea8ff; --accent-2:#7b6cff; --btn:#2a2f45; --btn-hover:#343a55;
      --shadow:0 10px 30px rgba(0,0,0,0.25); --radius:18px;
    }
    body{margin:0; font-family:sans-serif; background:var(--bg); color:var(--text);}
    .wrap{max-width:700px; margin:0 auto; padding:16px;}
    h1{margin-bottom:20px;}
    .item{
      background:var(--card); padding:12px; border-radius:var(--radius);
      margin-bottom:12px; display:flex; align-items:center; justify-content:space-between;
      box-shadow:var(--shadow);
    }
    .left{display:flex; align-items:center; gap:12px;}
    .emoji-box{
      width:50px; height:50px; border-radius:12px; background:#1e2235;
      display:flex; justify-content:center; align-items:center; overflow:hidden;
    }
    .emoji-box img{max-width:80%; max-height:80%;}
    .remove{background:none; border:none; color:tomato; font-size:20px; cursor:pointer;}
    .total{margin-top:20px; font-size:18px; font-weight:600;}
    .form{margin-top:24px; display:flex; flex-direction:column; gap:12px;}
    input, textarea{
      padding:12px; border-radius:12px; border:none;
      background:var(--btn); color:var(--text); font-size:15px;
    }
    input::placeholder, textarea::placeholder{color:var(--muted);}
    textarea{min-height:80px; resize:vertical;}
    .btn{
      padding:14px; border-radius:14px;
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      color:white; border:none; font-weight:700; cursor:pointer;
      box-shadow:var(--shadow); font-size:16px;
    }
    .btn:hover{opacity:0.9;}
    .muted{color:var(--muted); font-size:14px;}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>–ö–æ—Ä–∑–∏–Ω–∞</h1>
    <div id="items"></div>
    <div class="total" id="total"></div>

    <div class="form">
      <input id="nick" placeholder="–í–∞—à –Ω–∏–∫ –≤ Telegram">
      <input id="color" placeholder="–¶–≤–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, #ff0000)">
      <textarea id="comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏–ª–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è"></textarea>
      <p class="muted">‚ö†Ô∏è –õ–æ–≥–æ—Ç–∏–ø –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ Telegram –≤–º–µ—Å—Ç–µ —Å –∑–∞–∫–∞–∑–æ–º</p>
      <button class="btn" onclick="sendOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>
  </div>

  <script>
    const PRICE=0.8;
    function getCart(){ return JSON.parse(localStorage.getItem("cart")||"[]"); }
    function saveCart(c){ localStorage.setItem("cart", JSON.stringify(c)); render(); }

    function removeItem(id){
      let cart=getCart().filter(c=>c.item.id!==id);
      saveCart(cart);
    }

    function render(){
      const items=getCart();
      document.getElementById("items").innerHTML=items.map(c=>`
        <div class="item">
          <div class="left">
            <div class="emoji-box"><img src="${c.item.id}.png" alt=""></div>
            <div>${c.item.name}</div>
          </div>
          <button class="remove" onclick="removeItem('${c.item.id}')">‚úñ</button>
        </div>
      `).join('');
      document.getElementById("total").innerText="–ò—Ç–æ–≥–æ: "+(items.length*PRICE).toFixed(2)+" TON";
    }

    function sendOrder(){
      const items=getCart();
      if(items.length===0) return alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!");
      const nick=document.getElementById("nick").value.trim();
      if(!nick) return alert("–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫!");
      const color=document.getElementById("color").value.trim()||"–ù–µ —É–∫–∞–∑–∞–Ω";
      const comment=document.getElementById("comment").value.trim()||"";
      let text="üõí –ó–∞–∫–∞–∑ —ç–º–æ–¥–∑–∏:%0A";
      items.forEach(c=>{ text+="‚Ä¢ "+c.item.name+"%0A"; });
      text+="%0A–¶–≤–µ—Ç: "+color;
      if(comment) text+="%0A–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "+comment;
      text+="%0A–ò—Ç–æ–≥–æ: "+(items.length*PRICE).toFixed(2)+" TON";
      text+="%0A–ù–∏–∫: "+nick;
      text+="%0A‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª–æ–≥–æ—Ç–∏–ø –≤ Telegram";

      // ‚ö†Ô∏è –ó–∞–º–µ–Ω–∏ username –Ω–∞ —Å–≤–æ–π
      window.open("https://t.me/theConCreator?start="+encodeURIComponent(text));
    }

    render();
  </script>
</body>
</html>
