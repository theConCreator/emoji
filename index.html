<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —ç–º–æ–¥–∑–∏</title>
<style>
:root {
  --bg:#0f1220; --card:#171a2a; --text:#e8ebff;
  --accent:#6ea8ff; --accent-2:#7b6cff; --btn:#2a2f45; --btn-hover:#343a55;
  --shadow:0 10px 30px rgba(0,0,0,0.25); --radius:18px;
}
body {margin:0; font-family:sans-serif; background:var(--bg); color:var(--text);}
.wrap{max-width:980px; margin:0 auto; padding:16px;}
header{display:flex; justify-content:space-between; align-items:center; padding:16px; background:var(--card); border-radius:var(--radius); margin-bottom:20px;}
.cart-btn{color:var(--text); text-decoration:none; padding:10px 14px; border-radius:999px; background:var(--btn); font-weight:700;}
.cart-btn:hover{background:var(--btn-hover);}
.grid{display:grid; grid-template-columns:repeat(2, 1fr); gap:16px;}
@media (max-width:480px) {
  .grid {grid-template-columns:1fr;} /* –æ–¥–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
}
.card{background:var(--card); border-radius:var(--radius); padding:14px; box-shadow:var(--shadow); display:flex; flex-direction:column; gap:10px; text-align:center; align-items:center;}
.emoji-box{width:150px; height:150px; border-radius:14px; display:grid; place-items:center; border:1px dashed rgba(255,255,255,0.08); cursor:pointer; overflow:hidden;}
.name{font-size:16px; font-weight:600; margin-top:5px;}
.btn{margin-top:8px; padding:10px 12px; border-radius:12px; background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:white; border:none; font-weight:700; cursor:pointer; box-shadow:var(--shadow); transition:0.2s;}
.btn:hover{opacity:0.85;}
footer{margin-top:40px; padding:16px; border-top:1px solid rgba(255,255,255,0.06); color:#9aa3c7; text-align:center;}
</style>
</head>
<body>
<header class="wrap">
  <h1>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ Telegram —ç–º–æ–¥–∑–∏</h1>
  <a class="cart-btn" href="cart.html">üõí –ö–æ—Ä–∑–∏–Ω–∞</a>
</header>

<main class="wrap">
  <div class="grid" id="grid"></div>
</main>

<footer class="wrap">¬© theConCreator</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.10.2/lottie.min.js"></script>
<script>
const items = [
  {id:"Flag1", name:"–§–ª–∞–≥"},
  {id:"Phone", name:"–¢–µ–ª–µ—Ñ–æ–Ω"},
  {id:"Card", name:"–ö–∞—Ä—Ç–æ—á–∫–∞"},
  {id:"Case", name:"–ö–µ–π—Å"},
  {id:"HeartArms", name:"–°–µ—Ä–¥—Ü–µ"},
  {id:"TopSign", name:"–¢–û–ü"}
];
const PRICE = 0.8;
const grid = document.getElementById("grid");
const animations = {};

function getCart(){return JSON.parse(localStorage.getItem("cart")||"[]");}
function setCart(c){localStorage.setItem("cart",JSON.stringify(c)); render();}

function toggleCart(item){
  let cart=getCart();
  const exists=cart.find(c=>c.item.id===item.id);
  if(exists){cart=cart.filter(c=>c.item.id!==item.id);}
  else {cart.push({item,price:PRICE});}
  setCart(cart);
}

function render(){
  const cart = getCart();
  grid.innerHTML = '';
  items.forEach(item=>{
    const inCart = cart.find(c=>c.item.id===item.id);

    // —Å–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É
    const card = document.createElement('div');
    card.className = 'card';

    // —Å–æ–∑–¥–∞–µ–º emoji-box
    const box = document.createElement('div');
    box.className = 'emoji-box';

    // –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Lottie
    const animContainer = document.createElement('div');
    animContainer.style.width='100%';
    animContainer.style.height='100%';
    box.appendChild(animContainer);

    // –∑–∞–≥—Ä—É–∂–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
    animations[item.id] = lottie.loadAnimation({
      container: animContainer,
      renderer: 'svg',
      loop: false,
      autoplay: false,
      path: item.id+'.json'
    });
    animations[item.id].addEventListener('DOMLoaded', ()=>{
      animations[item.id].goToAndStop(0,true);
    });

    // –∫–ª–∏–∫/—Ç–∞–ø –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
    box.onclick = ()=> {
      const anim = animations[item.id];
      if(!anim) return;
      anim.stop();
      anim.play();
      anim.addEventListener("complete", ()=>anim.goToAndStop(0,true), {once:true});
    };

    // –Ω–∞–∑–≤–∞–Ω–∏–µ
    const nameDiv = document.createElement('div');
    nameDiv.className='name';
    nameDiv.textContent=item.name;

    // –∫–Ω–æ–ø–∫–∞
    const btn = document.createElement('button');
    btn.className='btn';
    btn.textContent = inCart ? '–£–±—Ä–∞—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã' : '–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É';
    btn.onclick = ()=>toggleCart(item);

    // —Å–æ–±–∏—Ä–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É
    card.appendChild(box);
    card.appendChild(nameDiv);
    card.appendChild(btn);
    grid.appendChild(card);
  });
}

render();
</script>
</body>
</html>
